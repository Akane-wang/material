# 单元测试与测试覆盖率

- 单纯的测试框架，需要断言库(mocha, ava)
  - chai
  - should.js
  - expect
  - better-assert
- 集成框架，开箱即用
  - jasmine
  - jest
- 极简api

## 编写单元测试用例

- 技术选型： Mocha + Chai
- 测试代码： describe, it, except
- 测试命令： mocha add.test.js

## 单元测试接入

- 安装mocha + chai`npm i mocha chai -D`

- 新建test目录， 并增加xxx.test.js测试文件

- 在package.json中的scripts字段中增加test命令

  ```js
  "scripts": {
      "test": "./node_modules/.bin/_mocha" // 这个运行不了，说不知道.是啥
      "test": "mocha test" // 出自阮一峰老师的笔记,截图如下
  }
  ```

  ![mocha运行命令出处](D:\personal\material\personal-note\webpack\mdnotes\images\mocha-test.jpg)

- 执行测试命令

  - npm run test

## 测试覆盖率

- istanbul

  ```js
  安装：npm i istanbul -D
  修改脚本
  "srcript": {
      "test": "istanbul cover mocha test", // 不行，不知道是系统的问题还是其他问题
       // 测试覆盖率有问题，估计应该是windows不能使用shell?的问题
  }
  ```

  